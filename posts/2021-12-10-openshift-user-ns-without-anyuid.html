<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Fraser's IdM Blog - no title</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Fraser's IdM Blog</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <div class="info">
    
    Tags: 
    
</div>

<div id="postContent">
    <pre class="shell"><code>% oc new-project test
Now using project &quot;test&quot; on server &quot;https://api.ci-ln-5rkyxfb-72292.origin-ci-int-gce.dev.rhcloud.com:6443&quot;.
…

% oc create user test
user.user.openshift.io/test created

% oc adm policy add-role-to-user edit test
clusterrole.rbac.authorization.k8s.io/edit added: &quot;test&quot;

% oc get -o yaml namespace/test
apiVersion: v1
kind: Namespace
metadata:
  annotations:
    openshift.io/description: &quot;&quot;
    openshift.io/display-name: &quot;&quot;
    openshift.io/requester: system:admin
    openshift.io/sa.scc.mcs: s0:c26,c0
    openshift.io/sa.scc.supplemental-groups: 1000650000/10000
    openshift.io/sa.scc.uid-range: 1000650000/10000
  creationTimestamp: &quot;2021-12-09T05:18:40Z&quot;
  labels:
    kubernetes.io/metadata.name: test
  name: test
  resourceVersion: &quot;41932&quot;
  uid: 9e191fb6-b84d-42fc-b05f-ef449c0d662c
spec:
  finalizers:
  - kubernetes
status:
  phase: Active

% cat pod-multiuser-private.yaml
apiVersion: v1
kind: Pod
metadata:
  name: multiuser
  annotations:
    openshift.io/scc: restricted
    io.openshift.builder: &quot;true&quot;
    io.kubernetes.cri-o.userns-mode: &quot;private:uidmapping=0:1000650000:10000&quot;
spec:
  containers:
  - name: multiuser
    image: quay.io/ftweedal/test-multiuser:latest
  securityContext:
    runAsUser: 1000650000
    runAsGroup: 1000650000

% oc --as test create -f pod-multiuser-private.yaml
pod/multiuser created

% oc get pod/multiuser
NAME        READY   STATUS    RESTARTS   AGE
multiuser   1/1     Running   0          112s

% oc get -o json pod/multiuser | jq '.spec.nodeName, .status.containerStatuses[0].containerID'
&quot;ci-ln-5rkyxfb-72292-xxk2r-worker-c-j44pb&quot;
&quot;cri-o://5b0246ca9a9e8b28bedc60e218a6f6829f60c2ba0f083b5dcd32929d2f52af70&quot;</code></pre>
</div>
<div id="postFooter">
    <div id="recent">
Recent posts:
<ul>
    
        <li>
            <a href="../posts/2021-12-10-openshift-user-ns-without-anyuid.html">no title</a>
        </li>
    
        <li>
            <a href="../posts/2021-11-18-k8s-tcp-udp-ingress.html">Bare TCP and UDP ingress on Kubernetes</a>
        </li>
    
        <li>
            <a href="../posts/2021-10-15-openshift-userns-in-container.html">Creating user namespaces inside containers</a>
        </li>
    
        <li>
            <a href="../posts/2021-07-22-openshift-systemd-workload-demo.html">Demo: namespaced systemd workloads on OpenShift</a>
        </li>
    
        <li>
            <a href="../posts/2021-07-21-freeipa-on-openshift-update.html">FreeIPA on OpenShift: July 2021 update</a>
        </li>
    
</ul>

<div id="recentLinks">
    <a type="application/atom+xml" href="../atom.xml">Atom feed</a>
     <!-- em space -->
    <a href="../archive.html">All posts…</a>
</div>

</div>

    <div id="license">
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by/4.0/88x31.png">
    </a>
    <br />
    Except where otherwise noted, this work is licensed under a
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
        Creative Commons Attribution 4.0 International License
    </a>.
</div>

</div>

        </div>
        <div class="clear"></div>
        <div id="footer">
            Generated by
            <a href="https://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
