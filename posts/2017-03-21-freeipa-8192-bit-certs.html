<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Fraser's IdM Blog - Supporting large key sizes in FreeIPA certificates</title>
        <link rel="stylesheet" type="text/css" href="../css/default.css" />
    </head>
    <body>
        <div id="header">
            <div id="logo">
                <a href="../">Fraser's IdM Blog</a>
            </div>
            <div id="navigation">
                <a href="../">Home</a>
                <a href="../archive.html">Archive</a>
            </div>
        </div>

        <div id="content">
            <div class="info">
    
    Tags: <a title="All pages tagged 'freeipa'." href="../tags/freeipa.html">freeipa</a>, <a title="All pages tagged 'certificates'." href="../tags/certificates.html">certificates</a>, <a title="All pages tagged 'profiles'." href="../tags/profiles.html">profiles</a>
    
</div>

<div id="postContent">
    <h1 id="supporting-large-key-sizes-in-freeipa-certificates">Supporting large key sizes in FreeIPA certificates</h1>
<p>A couple of issues around key sizes in FreeIPA certificates have come to my attention this week: how to issue certificates for large key sizes, and how to deploy FreeIPA with a 4096-bit key. In this post I’ll discuss the situation with each of these issues. Though related, they are different issues so I’ll address each separately.</p>
<h2 id="issuing-certificates-with-large-key-sizes">Issuing certificates with large key sizes <a href="#issuing-certificates-with-large-key-sizes">§</a></h2>
<p>While researching the second issue I stumbled across issue <a href="https://pagure.io/freeipa/issue/6319">#6319: ipa cert-request limits key size to 1024,2048,3072,4096 bits</a>. To wit:</p>
<pre><code>ftweedal% ipa cert-request alice-8192.csr --principal alice
ipa: ERROR: Certificate operation cannot be completed:
  Key Parameters 1024,2048,3072,4096 Not Matched</code></pre>
<p>The solution is straightforward. Each certificate profile configures the key types and sizes that will be accepted by that profile. The default profile is configured to allow up to 4096-bit keys, so the certificate request containing an 8192-bit key fails. The profile configuration parameter involved is:</p>
<pre><code>policyset.&lt;name&gt;.&lt;n&gt;.constraint.params.keyParameters=1024,2048,3072,4096</code></pre>
<p>If you append <code>8192</code> to that list and update the profile configuration via <code>ipa certprofile-mod</code> (or create a new profile via <code>ipa certprofile-import</code>), then everything will work!</p>
<h2 id="deploying-freeipa-with-ipa-ca-signing-key-2048-bits">Deploying FreeIPA with IPA CA signing key &gt; 2048-bits <a href="#deploying-freeipa-with-ipa-ca-signing-key-2048-bits">§</a></h2>
<p>When you deploy FreeIPA today, the IPA CA has a 2048-bit RSA key. There is currently no way to change this, but Dogtag does support configuring the key size when spawning a CA instance, so it should not be hard to support this in FreeIPA. I created issue <a href="https://pagure.io/freeipa/issue/6790">#6790</a> to track this.</p>
<p>Looking beyond RSA, there is also issue <a href="https://pagure.io/freeipa/issue/3951">#3951: ECC Support for the CA</a> which concerns supporting a elliptic curve signing key in the FreeIPA CA. Once again, Dogtag supports EC signing algorithms, so supporting this in FreeIPA should be a matter of deciding the <code>ipa-server-install(1)</code> options and mechanically adjusting the <code>pkispawn</code> configuration.</p>
<p>If you have use cases for large signing keys and/or NIST ECC keys or other algorithms, please do not hesitate to leave comments in the issues linked above, or get in touch with the FreeIPA team on the <code>freeipa-users@lists.fedorahosted.org</code> mailing list or <code>#freeipa</code> on Freenode.</p>
</div>
<div id="postFooter">
    <div id="recent">
Recent posts:
<ul>
    
        <li>
            <a href="../posts/2020-12-08-k8s-srv-limitation.html">Kubernetes DNS Service Discovery limitations</a>
        </li>
    
        <li>
            <a href="../posts/2020-12-05-pod-hostname-fqdn.html">Pod hostnames and FQDNs</a>
        </li>
    
        <li>
            <a href="../posts/2020-12-01-openshift-crio-userns.html">User namespaces in OpenShift via CRI-O annotations</a>
        </li>
    
        <li>
            <a href="../posts/2020-11-30-openshift-machine-config-operator.html">Using the OpenShift Machine Config Operator</a>
        </li>
    
        <li>
            <a href="../posts/2020-11-13-acme-service-discovery.html">ACME Service Discovery</a>
        </li>
    
</ul>

<div id="recentLinks">
    <a type="application/atom+xml" href="../atom.xml">Atom feed</a>
     <!-- em space -->
    <a href="../archive.html">All posts…</a>
</div>

</div>

    <div id="license">
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by/4.0/88x31.png">
    </a>
    <br />
    Except where otherwise noted, this work is licensed under a
    <a rel="license" href="https://creativecommons.org/licenses/by/4.0/">
        Creative Commons Attribution 4.0 International License
    </a>.
</div>

</div>

        </div>
        <div class="clear"></div>
        <div id="footer">
            Generated by
            <a href="https://jaspervdj.be/hakyll">Hakyll</a>
        </div>
    </body>
</html>
